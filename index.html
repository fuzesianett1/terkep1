// Initialize compass
            setTimeout(() => {
                if (!orientationSupported) {
                    fallbackCompass();
                }
            }, 1000);
            
            // Initialize car position
            const car = document.getElementById('movingCar');
            if (car) {
                car.style.left = '180px';
                car.style.top = '380px';
                car.style.transform = 'rotate(90deg)';
            }                <!-- Helymegjel√∂l≈ë -->        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }        /* Mozg√≥ aut√≥ */
        .moving-car {
            position: absolute;
            font-size: 16px;
            z-index: 6;
            transition: all 2s cubic-bezier(0.4, 0, 0.2, 1);
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
        }
        
        .car-path {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(237, 70, 56, 0.3) 10%, 
                rgba(237, 70, 56, 0.6) 50%, 
                rgba(237, 70, 56, 0.3) 90%, 
                transparent 100%
            );
            border-radius: 1px;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            z-index: 1;
        }
        
        .car-path.active {
            opacity: 1;
            animation: pathGlow 2s ease-in-out;
        }
        
        @keyframes pathGlow {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(1.5); }
        }<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aut√≥ Dual T√©rk√©p</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #ED4638;
            --secondary: #34a853;
            --danger: #ED4638;
            --warning: #fbbc04;
            --white: #ffffff;
            --light-gray: #f8f9fa;
            --medium-gray: #e8eaed;
            --dark-gray: #333333;
            --text-primary: #202124;
            --text-secondary: #868D98;
            --shadow-light: rgba(60,64,67,0.1);
            --shadow-medium: rgba(60,64,67,0.15);
            --shadow-heavy: rgba(60,64,67,0.3);
            --map-road: #ffffff;
            --map-area: #f1f3f4;
            --map-water: #a8dadc;
            --map-green: #c8e6c9;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--light-gray);
            min-height: 100vh;
            padding: 16px;
            color: var(--text-primary);
        }
        
        .container {
            max-width: 420px;
            margin: 0 auto;
            background: var(--white);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 2px 10px var(--shadow-light);
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, #d63c2e 100%);
            padding: 24px 20px;
            text-align: center;
            color: var(--white);
            position: relative;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
            opacity: 0.1;
        }
        
        .header h1 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 4px;
            letter-spacing: -0.3px;
            position: relative;
            z-index: 1;
        }
        
        .header p {
            font-size: 14px;
            font-weight: 400;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }
        
        .map-container {
            position: relative;
            height: 450px;
            background: linear-gradient(135deg, var(--map-area) 0%, #f8f9fa 100%);
            margin: 0;
            border-radius: 0;
            overflow-x: auto;
            overflow-y: hidden;
            -webkit-overflow-scrolling: touch;
            border-top: 1px solid var(--medium-gray);
            border-bottom: 1px solid var(--medium-gray);
        }
        
        .map-content {
            position: relative;
            width: 720px;
            height: 100%;
            background: var(--map-area);
        }
        

        
        /* Grid vonalak */
        .grid-lines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.3;
            pointer-events: none;
        }
        
        .grid-line {
            position: absolute;
            background: var(--medium-gray);
        }
        
        .grid-h {
            height: 1px;
            width: 100%;
        }
        
        .grid-v {
            width: 1px;
            height: 100%;
        }
        
        .compass {
            position: absolute;
            top: 16px;
            left: 16px;
            width: 48px;
            height: 48px;
            background: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 12px;
            color: var(--text-primary);
            box-shadow: 0 2px 8px var(--shadow-medium);
            z-index: 10;
            transition: transform 0.3s ease;
            cursor: pointer;
        }
        
        .compass:hover {
            transform: scale(1.1);
        }
        
        .compass-needle {
            position: absolute;
            width: 2px;
            height: 16px;
            background: linear-gradient(to top, var(--primary) 0%, var(--primary) 50%, var(--dark-gray) 50%, var(--dark-gray) 100%);
            border-radius: 1px;
            transform-origin: center bottom;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .scale {
            position: absolute;
            bottom: 16px;
            right: 16px;
            background: var(--white);
            padding: 8px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
            color: var(--text-secondary);
            box-shadow: 0 2px 8px var(--shadow-medium);
            z-index: 10;
        }
        
        .building {
            position: absolute;
            border-radius: 12px;
            color: var(--white);
            font-weight: 600;
            text-align: center;
            font-size: 11px;
            padding: 14px 10px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 
                0 4px 20px var(--shadow-light),
                0 2px 8px var(--shadow-medium),
                0 8px 25px rgba(0,0,0,0.1);
            border: 2px solid var(--white);
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            z-index: 5;
        }
        
        .building:hover, .building:active {
            transform: translateY(-4px) scale(1.03);
            box-shadow: 
                0 8px 30px var(--shadow-medium),
                0 4px 12px var(--shadow-heavy),
                0 12px 40px rgba(0,0,0,0.15);
        }
        
        /* F≈ë√©p√ºlet - pulsing glow anim√°ci√≥val */
        .main-building {
            width: 110px;
            height: 75px;
            background: linear-gradient(135deg, var(--primary) 0%, #d63c2e 100%);
            top: 180px;
            left: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            animation: mainGlow 3s ease-in-out infinite;
        }
        
        @keyframes mainGlow {
            0%, 100% { 
                box-shadow: 
                    0 4px 20px var(--shadow-light),
                    0 2px 8px var(--shadow-medium),
                    0 8px 25px rgba(0,0,0,0.1),
                    0 0 0 0 rgba(237, 70, 56, 0);
            }
            50% { 
                box-shadow: 
                    0 4px 20px var(--shadow-light),
                    0 2px 8px var(--shadow-medium),
                    0 8px 25px rgba(0,0,0,0.1),
                    0 0 0 8px rgba(237, 70, 56, 0.2);
            }
        }
        
        /* Szerviz */
        .service-building {
            width: 85px;
            height: 65px;
            background: linear-gradient(135deg, var(--dark-gray) 0%, #202124 100%);
            top: 80px;
            left: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        /* M≈±szaki vizsga */
        .inspection-building {
            width: 75px;
            height: 55px;
            background: linear-gradient(135deg, var(--text-secondary) 0%, #5f6368 100%);
            top: 100px;
            left: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        /* Haszong√©pj√°rm≈± park */
        .commercial-park {
            width: 140px;
            height: 90px;
            background: linear-gradient(135deg, var(--primary) 0%, #d63c2e 100%);
            top: 170px;
            left: 480px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        /* Kapu */
        .gate {
            position: absolute;
            bottom: 30px;
            left: 140px;
            width: 75px;
            height: 45px;
            background: linear-gradient(135deg, var(--text-secondary) 0%, #5f6368 100%);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: var(--white);
            font-weight: 600;
            text-align: center;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 
                0 4px 20px var(--shadow-light),
                0 2px 8px var(--shadow-medium),
                0 8px 25px rgba(0,0,0,0.1);
            border: 2px solid var(--white);
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            z-index: 5;
        }
        
        .gate:hover, .gate:active {
            transform: translateY(-3px) scale(1.03);
            box-shadow: 
                0 6px 25px var(--shadow-medium),
                0 3px 10px var(--shadow-heavy),
                0 12px 35px rgba(0,0,0,0.15);
        }
        
        .location-pin {
            position: absolute;
            bottom: 85px;
            left: 140px;
            width: 32px;
            height: 32px;
            background: var(--primary);
            border-radius: 50% 50% 50% 0;
            transform: rotate(-45deg);
            display: flex;
            align-items: center;
            justify-content: center;
            animation: bounce 2s infinite;
            box-shadow: 0 4px 15px rgba(237, 70, 56, 0.4);
            z-index: 10;
        }
        
        .location-pin::before {
            content: '';
            width: 12px;
            height: 12px;
            background: var(--white);
            border-radius: 50%;
            transform: rotate(45deg);
        }
        
        .distance-badge {
            position: absolute;
            background: var(--white);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            color: var(--text-primary);
            border: 1px solid var(--medium-gray);
            box-shadow: 0 2px 8px var(--shadow-light);
            z-index: 6;
        }
        
        .distance-1 {
            top: 210px;
            left: 380px;
        }
        
        .direction-arrow {
            position: absolute;
            font-size: 18px;
            color: var(--primary);
            animation: float 2s ease-in-out infinite;
            font-weight: bold;
            z-index: 6;
        }
        
        .arrow-1 {
            top: 215px;
            left: 420px;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: rotate(-45deg) translateY(0); }
            40% { transform: rotate(-45deg) translateY(-4px); }
            60% { transform: rotate(-45deg) translateY(-2px); }
        }
        
        /* Hover kapcsolat vonalak */
        .connection-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, var(--primary), transparent);
            opacity: 0;
            transition: all 0.4s ease;
            pointer-events: none;
            z-index: 2;
            border-radius: 1px;
        }
        
        .connection-line.show {
            opacity: 0.6;
            animation: lineGrow 0.4s ease;
        }
        
        @keyframes lineGrow {
            from { width: 0; }
            to { width: var(--line-width); }
        }
        
        .info-panel {
            padding: 24px;
            background: var(--white);
        }
        
        .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .contact-card {
            text-align: center;
            padding: 16px 12px;
            background: var(--light-gray);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }
        
        .contact-card:hover {
            border-color: var(--primary);
            background: #e8f0fe;
            transform: translateY(-1px);
        }
        
        .contact-card:active {
            transform: scale(0.98);
        }
        
        .contact-card .icon {
            font-size: 20px;
            margin-bottom: 8px;
            display: block;
        }
        
        .contact-card .label {
            font-size: 11px;
            color: var(--text-secondary);
            margin-bottom: 4px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .contact-card .value {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-primary);
            line-height: 1.3;
        }
        
        .legend {
            margin-top: 24px;
        }
        
        .legend h3 {
            font-size: 16px;
            margin-bottom: 16px;
            color: var(--text-primary);
            font-weight: 600;
        }
        
        .legend-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            font-size: 12px;
            color: var(--text-secondary);
            padding: 10px;
            background: var(--light-gray);
            border-radius: 8px;
            font-weight: 500;
        }
        
        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            flex-shrink: 0;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(32, 33, 36, 0.6);
            backdrop-filter: blur(4px);
        }
        
        .modal-content {
            background: var(--white);
            margin: 25% auto;
            padding: 24px;
            border-radius: 16px;
            width: 90%;
            max-width: 340px;
            text-align: center;
            box-shadow: 0 8px 32px var(--shadow-heavy);
            animation: modalSlide 0.3s ease;
        }
        
        @keyframes modalSlide {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-content h3 {
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 12px;
            font-size: 18px;
        }
        
        .modal-content p {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.5;
        }
        
        .close {
            float: right;
            font-size: 24px;
            font-weight: 300;
            cursor: pointer;
            line-height: 1;
            color: var(--text-secondary);
            transition: color 0.2s ease;
        }
        
        .close:hover {
            color: var(--primary);
        }
        
        /* Responsive */
        @media (max-width: 480px) {
            .container {
                margin: 8px;
                max-width: none;
                border-radius: 12px;
            }
            
            .map-container {
                height: 380px;
            }
            
            .building {
                font-size: 10px;
                padding: 12px 8px;
            }
            
            .main-building {
                width: 95px;
                height: 65px;
            }
            
            .service-building {
                width: 75px;
                height: 55px;
            }
            
            .commercial-park {
                width: 115px;
                height: 75px;
            }
            
            .inspection-building {
                width: 65px;
                height: 45px;
            }
            
            .contact-grid {
                gap: 8px;
            }
            
            .contact-card {
                padding: 12px 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üó∫Ô∏è Aut√≥ Dual T√©rk√©p</h1>
            <p>√ârintsd meg az √©p√ºleteket a r√©szletek√©rt</p>
        </div>
        
        <!-- Map -->
        <div class="map-container">
            <div class="map-content">
                <!-- Minim√°l utak -->
                <div class="road main-road"></div>
                <div class="road vertical-road"></div>
                <div class="road left-road"></div>
                <div class="road right-road"></div>
                <!-- Ir√°nyt≈± -->
                <div class="compass" onclick="requestOrientation()">
                    <div class="compass-needle" id="compassNeedle"></div>
                    <div style="position: absolute; top: 2px; font-size: 8px; font-weight: 700;">N</div>
                </div>
                <div class="scale">50m</div>
                
                <!-- Grid vonalak -->
                <div class="grid-lines">
                    <div class="grid-line grid-h" style="top: 25%;"></div>
                    <div class="grid-line grid-h" style="top: 50%;"></div>
                    <div class="grid-line grid-h" style="top: 75%;"></div>
                    <div class="grid-line grid-v" style="left: 25%;"></div>
                    <div class="grid-line grid-v" style="left: 50%;"></div>
                    <div class="grid-line grid-v" style="left: 75%;"></div>
                </div>
                
                <!-- Kapu -->
                <div class="gate" onclick="showInfo('gate')" data-building="gate">
                    <div>üö™ KAPU</div>
                    <div style="font-size: 8px; margin-top: 2px; opacity: 0.8;">Bej√°rat</div>
                </div>
                
                <!-- F≈ë√©p√ºlet -->
                <div class="building main-building" onclick="showInfo('main')" data-building="main">
                    <div>üè¢ F≈ê√âP√úLET</div>
                    <div style="font-size: 9px; margin-top: 3px; opacity: 0.9;">√ârt√©kes√≠t√©s ‚Ä¢ Hitel</div>
                </div>
                
                <!-- Szerviz -->
                <div class="building service-building" onclick="showInfo('service')" data-building="service">
                    <div>üîß SZERVIZ</div>
                    <div style="font-size: 9px; margin-top: 3px; opacity: 0.9;">Jav√≠t√°s</div>
                </div>
                
                <!-- M≈±szaki vizsga -->
                <div class="building inspection-building" onclick="showInfo('inspection')" data-building="inspection">
                    <div>üìã M≈∞SZAKI</div>
                    <div style="font-size: 9px; margin-top: 3px; opacity: 0.9;">Vizsga</div>
                </div>
                
                <!-- Haszong√©pj√°rm≈± park -->
                <div class="building commercial-park" onclick="showInfo('commercial')" data-building="commercial">
                    <div>üöõ HASZON-</div>
                    <div>G√âPJ√ÅRM≈∞</div>
                </div>
                
                <!-- Kapcsolat vonalak -->
                <div class="connection-line" id="line-main"></div>
                <div class="connection-line" id="line-service"></div>
                <div class="connection-line" id="line-inspection"></div>
                <div class="connection-line" id="line-commercial"></div>
                
                <!-- T√°vols√°g √©s ir√°ny -->
                <div class="distance-badge distance-1">120m</div>
                <div class="direction-arrow arrow-1">‚Üí</div>
                
                <!-- Mozg√≥ aut√≥ √©s √∫tvonalak -->
                <div class="moving-car" id="movingCar">üöó</div>
                <div class="car-path" id="carPath"></div>
                <div class="location-pin"></div>
            </div>
        </div>
        
        <!-- Info Panel -->
        <div class="info-panel">
            <div class="contact-grid">
                <div class="contact-card" onclick="openHours()">
                    <span class="icon">üïê</span>
                    <div class="label">Nyitva</div>
                    <div class="value">H-P: 9-17</div>
                </div>
                
                <div class="contact-card" onclick="showEmail()">
                    <span class="icon">‚úâÔ∏è</span>
                    <div class="label">Email</div>
                    <div class="value">ugyfelszolgalat@autodual.hu</div>
                </div>
                
                <div class="contact-card" onclick="callPhone()">
                    <span class="icon">üìû</span>
                    <div class="label">Telefon</div>
                    <div class="value">+36 20 804 8666</div>
                </div>
                
                <div class="contact-card" onclick="showAddress()">
                    <span class="icon">üìç</span>
                    <div class="label">C√≠m</div>
                    <div class="value">B√©k√©scsaba</div>
                </div>
            </div>
            
            <div class="legend">
                <h3>Telephely t√©rk√©pe</h3>
                <div class="legend-grid">
                    <div class="legend-item">
                        <div class="legend-dot" style="background: var(--primary);"></div>
                        <span>F≈ë√©p√ºlet</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: var(--dark-gray);"></div>
                        <span>Szerviz</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: var(--text-secondary);"></div>
                        <span>M≈±szaki vizsga</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: var(--primary);"></div>
                        <span>Haszong√©pj√°rm≈±</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal -->
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>
    
    <script>
        const buildingInfo = {
            gate: {
                title: "üö™ Bej√°rat",
                content: "F≈ëbej√°rat a telephelyre.<br><br>üöó Parkol√°s a kapu ut√°n<br>üè¢ F≈ë√©p√ºlet k√∂z√©pen<br><br>üìç T√°j√©koz√≥d√°s: k√∂vesse a t√°bl√°kat!"
            },
            main: {
                title: "üè¢ F≈ë√©p√ºlet",
                content: "Itt tal√°lhat√≥k az √©rt√©kes√≠t≈ëk √©s hitel√ºgyint√©z≈ëk.<br><br>üìû Telefon: +36 20 804 8666<br>üïê Nyitva: H-P 9:00-17:00<br><br>üí° <strong>Minden inform√°ci√≥ itt!</strong>"
            },
            service: {
                title: "üîß Szerviz",
                content: "Professzion√°lis aut√≥jav√≠t√°s √©s karbantart√°s.<br><br>üìû Szerviz: +36 20 804 8666<br>üïê Nyitva: H-P 8:00-16:30<br><br>‚öôÔ∏è Teljes k√∂r≈± szerviz szolg√°ltat√°s"
            },
            inspection: {
                title: "üìã M≈±szaki Vizsga",
                content: "M≈±szaki vizsg√°ztat√°s.<br><br>üìû M≈±szaki: +36 20 804 8666<br>üïê Nyitva: H-P 8:00-16:30<br><br>üìÑ Gyors √ºgyint√©z√©s"
            },
            commercial: {
                title: "üöõ Haszong√©pj√°rm≈± Park",
                content: "Kisteheraut√≥k, furgonok √©s haszong√©pj√°rm≈±vek.<br><br>üìç 120 m√©ter a f≈ë√©p√ºlett≈ël lefel√©"
            }
        };
        
        let currentOrientation = 0;
        let orientationSupported = false;
        
        // √âl≈ë ir√°nyt≈± funkci√≥k
        function requestOrientation() {
            if ('DeviceOrientationEvent' in window) {
                if (typeof DeviceOrientationEvent.requestPermission === 'function') {
                    // iOS 13+ permission request
                    DeviceOrientationEvent.requestPermission()
                        .then(permissionState => {
                            if (permissionState === 'granted') {
                                enableCompass();
                            } else {
                                fallbackCompass();
                            }
                        })
                        .catch(() => fallbackCompass());
                } else {
                    // Android vagy r√©gebbi iOS
                    enableCompass();
                }
            } else {
                fallbackCompass();
            }
        }
        
        function enableCompass() {
            orientationSupported = true;
            window.addEventListener('deviceorientationabsolute', handleOrientation, true);
            window.addEventListener('deviceorientation', handleOrientation, true);
            
            // Feedback
            document.querySelector('.compass').style.borderColor = 'var(--secondary)';
            setTimeout(() => {
                document.querySelector('.compass').style.borderColor = 'transparent';
            }, 1000);
        }
        
        function handleOrientation(event) {
            if (orientationSupported) {
                let heading = event.alpha || event.webkitCompassHeading || 0;
                if (event.webkitCompassHeading) {
                    heading = 360 - heading; // iOS correction
                }
                updateCompass(heading);
            }
        }
        
        function updateCompass(heading) {
            const needle = document.getElementById('compassNeedle');
            if (needle) {
                needle.style.transform = `rotate(${heading}deg)`;
                currentOrientation = heading;
            }
        }
        
        function fallbackCompass() {
            // Fallback anim√°ci√≥ ha nincs gyroscope
            const needle = document.getElementById('compassNeedle');
            let angle = 0;
            setInterval(() => {
                angle += 2;
                if (angle >= 360) angle = 0;
                needle.style.transform = `rotate(${angle}deg)`;
            }, 100);
        }
        
        // Mozg√≥ aut√≥ funkci√≥k
        const carRoutes = {
            'gate-main': {
                start: { x: 180, y: 380 },
                end: { x: 255, y: 220 },
                duration: 2000
            },
            'gate-service': {
                start: { x: 180, y: 380 },
                end: { x: 65, y: 115 },
                duration: 2500
            },
            'gate-inspection': {
                start: { x: 180, y: 380 },
                end: { x: 235, y: 130 },
                duration: 2200
            },
            'gate-commercial': {
                start: { x: 180, y: 380 },
                end: { x: 550, y: 215 },
                duration: 3000
            }
        };
        
        function moveCarTo(destination) {
            const car = document.getElementById('movingCar');
            const path = document.getElementById('carPath');
            const route = carRoutes[`gate-${destination}`];
            
            if (!route || !car) return;
            
            // Setup √∫tvonal vizualiz√°ci√≥
            const distance = Math.sqrt(
                Math.pow(route.end.x - route.start.x, 2) + 
                Math.pow(route.end.y - route.start.y, 2)
            );
            const angle = Math.atan2(
                route.end.y - route.start.y, 
                route.end.x - route.start.x
            ) * 180 / Math.PI;
            
            path.style.left = route.start.x + 'px';
            path.style.top = route.start.y + 'px';
            path.style.width = distance + 'px';
            path.style.transform = `rotate(${angle}deg)`;
            path.style.transformOrigin = '0 50%';
            path.classList.add('active');
            
            // Aut√≥ poz√≠ci√≥ √©s anim√°ci√≥
            car.style.left = route.start.x + 'px';
            car.style.top = route.start.y + 'px';
            car.style.transform = `rotate(${angle + 90}deg)`;
            
            // Mozg√°s anim√°ci√≥
            setTimeout(() => {
                car.style.left = route.end.x + 'px';
                car.style.top = route.end.y + 'px';
            }, 100);
            
            // Cleanup
            setTimeout(() => {
                path.classList.remove('active');
                car.style.left = route.start.x + 'px';
                car.style.top = route.start.y + 'px';
                car.style.transform = 'rotate(90deg)';
            }, route.duration + 500);
        }
        
        function showInfo(building) {
            const modal = document.getElementById('infoModal');
            const content = document.getElementById('modalContent');
            const info = buildingInfo[building];
            
            content.innerHTML = `
                <h3 style="margin-bottom: 15px;">${info.title}</h3>
                <p>${info.content}</p>
            `;
            
            modal.style.display = 'block';
            
            // Trigger car animation
            if (building !== 'gate') {
                moveCarTo(building);
            }
        }
        
        function closeModal() {
            document.getElementById('infoModal').style.display = 'none';
        }
        
        function callPhone() {
            if (confirm('H√≠v√°s ind√≠t√°sa: +36 20 804 8666?')) {
                window.location.href = 'tel:+36208048666';
            }
        }
        
        function showEmail() {
            if (confirm('Email k√ºld√©se: ugyfelszolgalat@autodual.hu?')) {
                window.location.href = 'mailto:ugyfelszolgalat@autodual.hu';
            }
        }
        
        function openHours() {
            alert('Nyitvatart√°s:\n\nüè¢ F≈ë√©p√ºlet: H-P 9:00-17:00\nüîß Szerviz: H-P 8:00-16:30\nüìã M≈±szaki: H-P 8:00-16:30\n\nSzombat-Vas√°rnap: Z√°rva');
        }
        
        function showAddress() {
            alert('C√≠m: B√©k√©scsaba\n\nNavig√°ci√≥ ind√≠t√°sa?');
        }
        
        // Modal bez√°r√°s kattint√°sra
        window.onclick = function(event) {
            const modal = document.getElementById('infoModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
        
        // Touch optimaliz√°l√°s
        document.addEventListener('DOMContentLoaded', function() {
            const buildings = document.querySelectorAll('.building, .gate');
            const contactItems = document.querySelectorAll('.contact-card');
            
            // Hover connection lines
            const gateRect = document.querySelector('.gate').getBoundingClientRect();
            const mapRect = document.querySelector('.map-content').getBoundingClientRect();
            
            buildings.forEach(element => {
                // Connection line setup
                const buildingType = element.getAttribute('data-building');
                if (buildingType && buildingType !== 'gate') {
                    const line = document.getElementById(`line-${buildingType}`);
                    if (line) {
                        setupConnectionLine(element, line);
                    }
                }
                
                // Click events
                element.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const buildingType = this.getAttribute('onclick');
                    if (buildingType) {
                        const match = buildingType.match(/showInfo\('(.+?)'\)/);
                        if (match) {
                            showInfo(match[1]);
                        }
                    }
                });
                
                element.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    this.style.opacity = '0.9';
                    this.style.transform = 'scale(0.97)';
                }, { passive: false });
                
                element.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    this.style.opacity = '1';
                    this.style.transform = 'scale(1)';
                    
                    const buildingType = this.getAttribute('onclick');
                    if (buildingType) {
                        const match = buildingType.match(/showInfo\('(.+?)'\)/);
                        if (match) {
                            showInfo(match[1]);
                        }
                    }
                }, { passive: false });
            });
            
            function setupConnectionLine(building, line) {
                const gate = document.querySelector('.gate');
                
                building.addEventListener('mouseenter', function() {
                    const buildingRect = building.getBoundingClientRect();
                    const gateRect = gate.getBoundingClientRect();
                    const mapRect = document.querySelector('.map-content').getBoundingClientRect();
                    
                    // Calculate relative positions within map
                    const gateX = gateRect.left - mapRect.left + gateRect.width;
                    const gateY = gateRect.top - mapRect.top + gateRect.height / 2;
                    const buildingX = buildingRect.left - mapRect.left;
                    const buildingY = buildingRect.top - mapRect.top + buildingRect.height / 2;
                    
                    const distance = Math.sqrt(Math.pow(buildingX - gateX, 2) + Math.pow(buildingY - gateY, 2));
                    const angle = Math.atan2(buildingY - gateY, buildingX - gateX) * 180 / Math.PI;
                    
                    line.style.left = gateX + 'px';
                    line.style.top = gateY + 'px';
                    line.style.width = distance + 'px';
                    line.style.transform = `rotate(${angle}deg)`;
                    line.style.transformOrigin = '0 50%';
                    line.classList.add('show');
                });
                
                building.addEventListener('mouseleave', function() {
                    line.classList.remove('show');
                });
            }
            
            // Contact items
            contactItems.forEach(element => {
                element.addEventListener('touchstart', function() {
                    this.style.opacity = '0.8';
                });
                element.addEventListener('touchend', function() {
                    this.style.opacity = '1';
                });
            });
        });
    </script>
</body>
</html>
